<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js" integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ" crossorigin="anonymous"></script>

    {%if request.user.is_authenticated%}

    <style>
      body{
        text-align: center;
        color: whitesmoke;
        background-color: black;
      }
      h1{
        margin-top: 5%;
      }
      
    </style>
  
    <script>
      know = {
        "Hi" : "&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp Hello!",
        "Who are you?" : "&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp Your Personal Assistant",
        "How are you?" : "&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp I am Good",
        "What's up?" : "&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp Nothing Much"
      };

      function talk() {
        var user = document.getElementById("userBox").value;
        document.getElementById("userBox").value="";
        document.getElementById("chatLog").innerHTML += user+"<br>";
        
        if(user in know)
        {
          document.getElementById("chatLog").innerHTML += know[user] + "<br>";
        } 
        else 
        {

          document.getElementById("chatLog").innerHTML += "&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp I don't Understand...<br>";


        }
      }
    </script>
    
    <title>ChatApp</title>
</head>
<body>

  {% load static %}

    <nav class="navbar navbar-expand-lg navbar-light bg-dark">
      <a class="navbar-brand text-primary" href="#">ChatApp</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-item nav-link text-primary" href="{%url 'password_change'%}" class="button1">Change Password</a>
          <a class="nav-item nav-link text-primary" href="{%url 'logout'%}" class="button1">Logout</a>
    
        </div>
      </div>  
    </nav>

    <img src="{%static 'chatlogo.jpg'%}" width='10%' height='10%'>

    <p id="chatLog"> Let's have a Chat!<br> </p>

    <input id="userBox" type="text" onkeydown="if(event.keyCode == 13) {talk()}">

    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2" class="active"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          {%load static%}
          <img class="d-block w-100" src="{%static 'bg.jpg'%}" alt="First slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{%static 'chatlogo.jpg'%}" alt="Second slide">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{%static 'chatimage.jpg'%}" alt="Third slide">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    
    {%else%}

    <style>
      body{
        text-align: center;
        color: whitesmoke;
        background-color: black;
      }
      h1{
        margin-top: 5%;
      }
      
    </style>

    <h1>New to ChatApp?</h1>
    <a href="{%url 'SignUp'%}"><button class="btn btn-primary" type="submit">SignUp</button></a>
    <h1>0R</h1>
    <h1>Already have an account?</h1>
    <a href="{%url 'login'%}"><button class="btn btn-primary" type="submit">LogIn</button></a>

    {%endif%}
  
</body>
</html>